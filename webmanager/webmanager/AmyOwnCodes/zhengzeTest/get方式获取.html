<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		<script type="text/javascript">
			userName.onblur = function(){
				var nameValue = userName.value;		
				//Ajax
				var xhr;
				if(window.XMLHttpRequest){
					xhr = new XMLHttpRequest();
				}else{
					xhr = new ActiveXObject("Microsoft.XMLHTTP");
				}	
				xhr.open("get","http://localhost:8080/user/CheckUserNameGet?username="+nameValue,true);    //json			
       			xhr.send();
				xhr.onreadystatechange=function(){
					if(xhr.readyState==4){	
						if(xhr.status==200){
							var result =xhr.responseText;							
							var oData = JSON.parse(result);//解析成可读样式							
							if(oData == 1){
									alert("该用户名已被注册！！");
									userName.value = "";
								}else{
									alert("可以")
								}
							
						}else{
							alert("未获取！");
						}
					}
				}		
			}
			rePass.onchange = function(){
				var passValue = pass.value;
				var repassValue = rePass.value;
				if(repassValue != passValue){
					alert("密码不一致,请重新输入!");
				}
			}
			//点击注册
			btn1.onclick = function(){
				var nameValue = userName.value;	
				var passValue = pass.value;
				var xhr;
		        if (window.XMLHttpRequest) {
			        xhr = new XMLHttpRequest();
			    } else {
			        xhr = new ActiveXObject("Microsoft.XMLHTTP");
			    }
		
				xhr.open("get", "http://localhost:8080/user/registerGet?name="+nameValue+"&password="+passValue, true);
		        xhr.send();
				
		        xhr.onreadystatechange = function () {
			        if (xhr.readyState == 4) {
				        if (xhr.status == 200) {
					        var result =xhr.responseText;							
							var oData = JSON.parse(result);//解析成可读样式	
							alert(oData);
				        } else {
				       		alert("失败");
				        }
			        }
		        }
		       
			}
			
		</script>
	</body>
</html>
